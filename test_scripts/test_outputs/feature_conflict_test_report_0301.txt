========================================================================
  功能與衝突測試報告
  生成時間：2026-03-01 10:19:22
  總耗時：2.58s
========================================================================

【總覽】
  概念數：12  案例數：46  通過：46  失敗：0
  整體通過率：100.0%

────────────────────────────────────────────────────────────────────────
【各概念摘要】
  ID     標題                                         通過     失敗     通過率      耗時
  F1     開啟 / 儲存 / 另存                               12     0       100.0%  0.25s  ✓
  F2     刪除頁 / 旋轉頁 / 匯出頁 / 插入空白頁                    1      0       100.0%  0.00s  ✓
  F3     編輯文字 + 復原 + 重做                             0      0         0.0%  0.00s  ✓
  F4     註解 / 矩形 / 螢光筆                              6      0       100.0%  0.04s  ✓
  F5     搜尋 / 取得 Pixmap                             6      0       100.0%  0.29s  ✓
  F6     浮水印 新增/列表/更新/移除                            4      0       100.0%  0.01s  ✓
  C1     衝突：先新增註解再編輯文字（註解應保留）                       0      0         0.0%  0.00s  ✓
  C2     衝突：刪除頁 → 復原（頁數應還原）                         1      0       100.0%  0.00s  ✓
  C3     衝突：旋轉頁後再編輯該頁文字                             6      0       100.0%  0.69s  ✓
  C4     衝突：插入空白頁後編輯原第一頁（現第二頁）                      6      0       100.0%  1.18s  ✓
  C5     衝突：多輪 編輯→復原→重做 循環                          0      0         0.0%  0.00s  ✓
  C6     浮水印後 save_as 再開檔驗證（元數據還原，可編輯）              4      0       100.0%  0.10s  ✓

════════════════════════════════════════════════════════════════════════
【失敗案例與根本成因】

════════════════════════════════════════════════════════════════════════
【浮水印持久化說明】
  方案 B 已實作：Model 在 save 時將浮水印元數據寫入 PDF 內嵌檔案（__pdf_editor_watermarks），
  開檔時還原 watermark_list，支援「重新開檔後仍可編輯浮水印」。C6 驗證 save_as 後重開 get_watermarks() 有值。

════════════════════════════════════════════════════════════════════════
【穩定性結論】
  ✅ 可視為穩定版本：各功能獨立與衝突情境通過率 ≥ 95%。

【建議】
  1. 定期執行本腳本與 test_deep.py，回歸驗證。
  2. 新增功能時補上對應概念測試與衝突情境。
  3. 浮水印元數據已透過 PDF 內嵌檔案持久化，重新開檔後可編輯（方案 B）。

【綜合驗證】
  建議同時執行 test_scripts/test_deep.py --quick（深度壓力與邊界測試）。
  本腳本通過率 100% 且深度測試 183/183 通過時，可視為穩定版本。
========================================================================